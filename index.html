<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>将棋 悪手アンケート</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <header class="bar">
    <div class="brand" id="pageTitle">将棋 悪手アンケート</div>
  </header>

  <main class="wrap">

    <!-- 送信済み表示（軽い抑止） -->
    <section class="panel" id="alreadyBox" style="display:none">
      <div class="h">注意</div>
      <div class="bigNote">
        この端末では「送信済み」の記録があります。二重送信になりそうならページを閉じてOKです。
      </div>
    </section>

    <!-- Step 1: 経験アンケート -->
    <section class="panel" id="stepExp">
      <div class="h">将棋経験アンケート</div>

      <div class="formRow">
        <label class="lab">学籍番号（必須）</label>
        <input id="studentId" class="inp" placeholder="例：1234567" />
      </div>

      <div class="formRow">
        <label class="lab">学年（必須）</label>
        <select id="grade" class="inp">
          <option value="">選択してください</option>
          <option>1年</option><option>2年</option><option>3年</option><option>4年</option>
          <option>院1年</option><option>院2年</option><option>その他</option>
        </select>
      </div>

      <div class="formRow">
        <div class="lab">Q1. 将棋経験として最も近いものを1つ選ぶ。（必須）</div>
        <label class="radio"><input type="radio" name="expLevel" value="将棋はほとんど指したことがない（ルールもあいまい／対局経験がほぼない）"> 将棋はほとんど指したことがない（ルールもあいまい／対局経験がほぼない）</label>
        <label class="radio"><input type="radio" name="expLevel" value="将棋は少し指したことがある（たまに指す程度、継続的ではない）"> 将棋は少し指したことがある（たまに指す程度、継続的ではない）</label>
        <label class="radio"><input type="radio" name="expLevel" value="将棋を継続的に指している、または過去に継続的に指していた時期がある（オンライン／対面は問わない）"> 将棋を継続的に指している、または過去に継続的に指していた時期がある（オンライン／対面は問わない）</label>
        <label class="radio"><input type="radio" name="expLevel" value="将棋部・道場・大会参加など、継続的な活動経験がある（現在／過去を含む）"> 将棋部・道場・大会参加など、継続的な活動経験がある（現在／過去を含む）</label>
      </div>

      <div class="err" id="expErr"></div>

      <div class="btnRow">
        <button class="btn primary" id="toCaseBtn">局面1へ進む</button>
      </div>

      <div class="note">
        ※ このページは GitHub 上の画面で操作します。下の局面ページに進んでも、最後の「送信して終了」を押すまで送信されません。
      </div>
    </section>

    <!-- Step 2: 局面 -->
    <section class="panel" id="stepCase" style="display:none">

      <div class="topHelp">
        <div class="bigNote">
          <div class="bigTitle">回答方法</div>
          <div>① まず「解説A」→「解説B」の順に読みます。</div>
          <div>② その後、1（Aが分かりやすい）〜5（Bが分かりやすい）の5段階で回答します。</div>
        </div>
      </div>

      <div class="caseInfo" id="caseInfo"></div>

      <div class="row">
        <div class="seg">
          <button class="seg-btn active" id="btnBad">悪手後PV</button>
          <button class="seg-btn" id="btnBest">最善手後PV</button>
        </div>

        <div class="seg">
          <button class="seg-btn active" id="btnExpA">解説A</button>
          <button class="seg-btn" id="btnExpB">解説B</button>
        </div>

        <div class="seen" id="seenBadge"></div>
      </div>

      <div class="main2col">
        <div>
          <div class="imageBox">
            <img id="boardImg" alt="board" />
          </div>

          <div class="labelBox" id="frameLabel"></div>

          <div class="sliderRow">
            <button class="btn" id="prevBtn">←</button>
            <input id="frameSlider" type="range" min="0" max="0" value="0" step="1" />
            <button class="btn" id="nextBtn">→</button>
            <div class="small" id="frameCount"></div>
          </div>
        </div>

        <div>
          <div class="textBox">
            <div class="h" id="expTitle">解説A</div>
            <pre id="expText"></pre>
          </div>
        </div>
      </div>

      <hr class="sep" />

      <div class="h">解説評価アンケート</div>

      <div class="note">
        1（Aが分かりやすい）〜5（Bが分かりやすい）で回答してください。<br/>
        ※ 解説A→解説Bの順に読んでから回答してください。
      </div>

      <div class="qBlock">
        <div class="qTitle">Q1. 日本語として自然で読みやすいのはどちらですか。（必須）</div>
        <div class="scale">
          <label><input type="radio" name="c_q1" value="1">1</label>
          <label><input type="radio" name="c_q1" value="2">2</label>
          <label><input type="radio" name="c_q1" value="3">3</label>
          <label><input type="radio" name="c_q1" value="4">4</label>
          <label><input type="radio" name="c_q1" value="5">5</label>
        </div>
      </div>

      <div class="qBlock">
        <div class="qTitle">Q2. なぜ悪手なのかを理解しやすいのはどちらですか。（必須）</div>
        <div class="scale">
          <label><input type="radio" name="c_q2" value="1">1</label>
          <label><input type="radio" name="c_q2" value="2">2</label>
          <label><input type="radio" name="c_q2" value="3">3</label>
          <label><input type="radio" name="c_q2" value="4">4</label>
          <label><input type="radio" name="c_q2" value="5">5</label>
        </div>
      </div>

      <div class="qBlock">
        <div class="qTitle">Q3. 局面の状況を正しく説明していると感じるのはどちらですか。（必須）</div>
        <div class="scale">
          <label><input type="radio" name="c_q3" value="1">1</label>
          <label><input type="radio" name="c_q3" value="2">2</label>
          <label><input type="radio" name="c_q3" value="3">3</label>
          <label><input type="radio" name="c_q3" value="4">4</label>
          <label><input type="radio" name="c_q3" value="5">5</label>
        </div>
      </div>

      <div class="qBlock">
        <div class="qTitle">Q4. 将棋の振り返り・上達に役立つと感じるのはどちらですか。（必須）</div>
        <div class="scale">
          <label><input type="radio" name="c_q4" value="1">1</label>
          <label><input type="radio" name="c_q4" value="2">2</label>
          <label><input type="radio" name="c_q4" value="3">3</label>
          <label><input type="radio" name="c_q4" value="4">4</label>
          <label><input type="radio" name="c_q4" value="5">5</label>
        </div>
      </div>

      <div class="qBlock">
        <div class="qTitle">Q5. 自由記述（任意）</div>
        <textarea id="c_q5" class="inp" rows="3" placeholder="気づいた点、分かりにくかった点、改善案など"></textarea>
      </div>

      <div class="err" id="caseErr"></div>

      <div class="btnRow">
        <button class="btn primary" id="nextCaseBtn" disabled>次の局面へ</button>
      </div>

      <div class="panel" id="doneBox" style="display:none; margin-top:12px;">
        <div class="h">送信しました</div>
        <div class="note">フォームの「回答」タブに反映されているか確認してください。（画面側では成功判定できません）</div>
      </div>

    </section>

  </main>

  <script src="./app.js"></script>
</body>
</html>
